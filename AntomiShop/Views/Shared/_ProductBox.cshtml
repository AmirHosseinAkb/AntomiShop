@model ProductBoxInformationsViewModel

@inject IProductService _productService;
@{
    var productDiscount = _productService.IsProductHasDiscount(@Model.ProductId);
}


<article class="single_product">
    <figure>
        <div class="product_thumb">
            <a class="primary_img" href="/ShowProduct/@Model.ProductId"><img src="/Product/Thumbnails/@Model.ProductImageName" alt=""></a>
            <div class="label_product">

                @if (Model.InventoryCount > 1)
                {
                    <span class="label_sale">
                        <i>فروش</i>
                    </span>
                }
                else
                {
                    <span class="label_sale" style="background-color:crimson">
                        <i>اتمام</i>
                    </span>
                }

            </div>
        </div>

        <div class="product_content grid_content">
            <div class="product_content_inner">
                <h4 class="product_name"><a href="/ShowProduct/@Model.ProductId">@Model.ProductTitle</a></h4>
                <div class="product_rating">
                    <ul>
                        <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                        <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                        <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                        <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                        <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                    </ul>
                </div>
                <div class="price_box">
                    @if (Model.InventoryCount == 0)
                    {
                        <div class="alert alert-info">این کالا در انبار وجود ندارد</div>
                    }
                    else if (Model.InventoryCount < 5)
                    {
                        <p class="text-danger">تنها @Model.InventoryCount عدد در انبار موجود است</p>

                        if (productDiscount != null)
                        {
                            <span class="old_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                            <span class="current_price">@((Model.ProductPrice-(Model.ProductPrice*productDiscount.DiscountPercent/100)).ToString("#,0")) تومان</span>
                        }
                        else
                        {
                            <span class="current_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                        }
                    }
                    else if (Model.InventoryCount > 5)
                    {
                        if (productDiscount != null)
                        {
                            <span class="old_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                            <span class="current_price">@((Model.ProductPrice-(Model.ProductPrice*productDiscount.DiscountPercent/100)).ToString("#,0")) تومان</span>
                        }
                        else
                        {
                            <span class="current_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                        }
                    }

                </div>
            </div>

        </div>
        <div class="product_content list_content">
            <h4 class="product_name"><a href="/ShowProduct/@Model.ProductId">@Model.ProductTitle</a></h4>
            <div class="product_rating">
                <ul>
                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                </ul>
            </div>
            <div class="price_box">
                @if (Model.InventoryCount == 0)
                {
                    <div class="alert alert-info">این کالا در انبار وجود ندارد</div>
                }
                else if (Model.InventoryCount < 5)
                {
                    <p class="text-danger">تنها @Model.InventoryCount عدد در انبار موجود است</p>
                    if (productDiscount != null)
                    {
                        <span class="old_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                        <span class="current_price">@((Model.ProductPrice-(Model.ProductPrice*productDiscount.DiscountPercent/100)).ToString("#,0")) تومان</span>
                    }
                    else
                    {
                        <span class="current_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                    }

                }
                else if (Model.InventoryCount > 5)
                {
                    if (productDiscount != null)
                    {
                        <span class="old_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                        <span class="current_price">@((Model.ProductPrice-(Model.ProductPrice*productDiscount.DiscountPercent/100)).ToString("#,0")) تومان</span>
                    }
                    else
                    {
                        <span class="current_price">@Model.ProductPrice.ToString("#,0") تومان</span>
                    }
                }
            </div>
        </div>
    </figure>
</article>